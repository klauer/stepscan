

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Step Scan Concepts &mdash; Step Scanning and Data Acquisition with Python and Epics Channel Access</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Step Scanning and Data Acquisition with Python and Epics Channel Access" href="index.html" />
    <link rel="next" title="Using StepScan" href="usage.html" />
    <link rel="prev" title="StepScan Downloading and Installation" href="install.html" /> 
  </head>
  <body>
<div style="background-color: #E4EAED; text-align: left; padding: 0px 0px 15px 15px">
 <h1> <a href="index.html">Step Scanning for Python and Epics Channel Access</a></h1>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="usage.html" title="Using StepScan"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="install.html" title="StepScan Downloading and Installation"
             accesskey="P">previous</a> |</li>
   <li><a href="install.html">download</a>|</li>
   <li><a href="#">scan concepts</a>|</li>
   <li><a href="usage.html">using stepscan</a>|</li>
   &nbsp;&nbsp;<li><a href="search.html">search</a></li>
 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Step Scan Concepts</a><ul>
<li><a class="reference internal" href="#positioners">Positioners</a></li>
<li><a class="reference internal" href="#triggers">Triggers</a></li>
<li><a class="reference internal" href="#counters">Counters</a><ul>
<li><a class="reference internal" href="#counters-for-waveforms">Counters for waveforms</a></li>
</ul>
</li>
<li><a class="reference internal" href="#detectors">Detectors</a></li>
<li><a class="reference internal" href="#extra-pvs">Extra PVs</a></li>
<li><a class="reference internal" href="#breakpoints">Breakpoints</a></li>
<li><a class="reference internal" href="#pre-and-post-scan-functions">Pre- and Post-Scan functions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="install.html"
                        title="previous chapter">StepScan Downloading and Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="usage.html"
                        title="next chapter">Using StepScan</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/concepts.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="step-scan-concepts">
<span id="scan-concepts-label"></span><h1>Step Scan Concepts<a class="headerlink" href="#step-scan-concepts" title="Permalink to this headline">¶</a></h1>
<p>A step scan is simply a <strong>for loop</strong> that iterates a collection of
<strong>Positioners</strong> (any Epics PV -- not restricted to Motors) through
a set of pre-determined position values.  At each position, a set
of detectors are <strong>triggered</strong> (which is to say, collection is
started), and then waited upon until they announce they are
complete.  At that point a collection of <strong>Counters</strong> (again, any
Epics PV, though for those holding waveform values see the notes
below) are read, and the loop starts over, moving on to the next
point in the list of positions.</p>
<dl class="docutils">
<dt>A StepScan also contains several other components::</dt>
<dd><ul class="first last simple">
<li>extra_pvs: a set of PVs to record once (or a few times) for each
scan, but not at every point in the scan.</li>
<li>breakpoints: a series of points in the scan at which data collected
so far is dumped to file, and perhaps other tasks are done.</li>
<li>pre_scan: a set of functions to call just prior to beginning the scan.</li>
<li>post_scan: a set of functions to call just after the scan completes.</li>
<li>at_break: a set of functions to call at each breakpoint (after the
data is written to disk).</li>
</ul>
</dd>
</dl>
<div class="section" id="positioners">
<h2>Positioners<a class="headerlink" href="#positioners" title="Permalink to this headline">¶</a></h2>
<p>Positioners are what is changed in the scan -- the dependent variables.
The can be represented by any Epics PV, such as Motors, temperatures,
currents, count times, or a combination of these.  Scans can have multiple
positioners, either moving in tandem to make a complex motion in the
positioner space, or independently to make a mesh in the positioner space.</p>
<p>In addition to a PV, each positioner will have an array of positions which
it should take during the scan.  The Positioner holds the full array
positions.  There are methods available for creating this from Start, Stop,
Step, and Npts parameters for simple linear scans, but you can also give it
a non-uniform array,</p>
<p>If you have multiple positioners, they must all have an array of positions
that is the same length.</p>
</div>
<div class="section" id="triggers">
<h2>Triggers<a class="headerlink" href="#triggers" title="Permalink to this headline">¶</a></h2>
<p>A Trigger is something that starts a detector counting.  The general
assumption is that these start integrating detectors with a finite count
time (which may have been set prior to the scan, or set as one of the
Positioners).  The scan waits for these triggers to announce that they have
completed (ie, the Epics &quot;put&quot; has completed).  That means that not just
any PV can be used as a Trigger -- you really need a trigger that will
finish.</p>
<p>For many detectors using standard Epics Records (Scalers, MCAs,
multi-element MCAs, AreaDetectors), using a Detector (see below) will
include the appropriate Trigger.</p>
</div>
<div class="section" id="counters">
<h2>Counters<a class="headerlink" href="#counters" title="Permalink to this headline">¶</a></h2>
<p>A Counter is any PV that you wish to measure at each point in the scan.</p>
<p>For many detectors using standard Epics Records (Scalers, MCAs,
multi-element MCAs, AreaDetectors), using a Detector (see below) will
automatically include a wide range of Counters.</p>
<div class="section" id="counters-for-waveforms">
<h3>Counters for waveforms<a class="headerlink" href="#counters-for-waveforms" title="Permalink to this headline">¶</a></h3>
<p>Currently, these are not directly supported, mostly as it is not yet
determined how to save this data into a plain ASCII file.  If more complex
file formats are used, these could be supported.</p>
<p>Note that a Trigger for an AreaDetector can be included, which
might cause it to save data through its own means.</p>
</div>
</div>
<div class="section" id="detectors">
<h2>Detectors<a class="headerlink" href="#detectors" title="Permalink to this headline">¶</a></h2>
<p>Detectors are essentially a combination of Triggers and Counters that
represent a detector as defined by one of the common Epics detector
records.  These include Scalers, MCAs, multi-element MCAs, and
AreaDetectors.</p>
</div>
<div class="section" id="extra-pvs">
<h2>Extra PVs<a class="headerlink" href="#extra-pvs" title="Permalink to this headline">¶</a></h2>
<p>Extra PVs are simply Epics PVs that should be recorded once (or
occasionally) during a scan, but but not at every point in the scan.  These
might include configuration information, detector and motor settings, and
ancillary data like temperatures, ring current, etc.</p>
<p>These should be supplied as a list of <em>(Label, PVname)</em> tuples.   The
values for these will be recorded at the beginning of each scan, and at
each breakpoint.</p>
</div>
<div class="section" id="breakpoints">
<h2>Breakpoints<a class="headerlink" href="#breakpoints" title="Permalink to this headline">¶</a></h2>
<p>Breakpoints are points in the scan at which the scan pauses briefly to
to read values for Extra PVs, write out these and the data collected so far
to disk,  and run any other user-defined functions.</p>
<p>A typical short, one dimensional scan will not need any breakpoints -- the
data will be written at the end of the scan. On the other hand, a two
dimensional mesh scan may want to set a breakpoint at the end of each row,
so that the data collected to date can be read from the datafile.</p>
<p>To set breakpoints, just put the indices of the points to break after
(starting the counting from 0) into a <cite>scan.breakpoints</cite> list.</p>
<p>Users can add their own functions to be run at each breakpoint as well.</p>
</div>
<div class="section" id="pre-and-post-scan-functions">
<h2>Pre- and Post-Scan functions<a class="headerlink" href="#pre-and-post-scan-functions" title="Permalink to this headline">¶</a></h2>
<p>These functions are run prior to and just after the scan has run.
Detectors and Positioners may add their own <tt class="xref py py-func docutils literal"><span class="pre">pre_scan()</span></tt> and
<tt class="xref py py-func docutils literal"><span class="pre">post_scan()</span></tt> methods, for example to place a detector in the right
mode for scanning.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="usage.html" title="Using StepScan"
             >next</a> |</li>
        <li class="right" >
          <a href="install.html" title="StepScan Downloading and Installation"
             >previous</a> |</li>
   <li><a href="install.html">download</a>|</li>
   <li><a href="#">scan concepts</a>|</li>
   <li><a href="usage.html">using stepscan</a>|</li>
   &nbsp;&nbsp;<li><a href="search.html">search</a></li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Matthew Newville.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>